<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Pokémon Cards</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px 30px 50px;
            animation: fadeIn 0.8s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        .layout {
            display: grid;
            grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.2fr);
            gap: 30px;
        }

        .card-form {
            background: #f8f9ff;
            border-radius: 16px;
            padding: 20px 20px 25px;
            border: 1px solid #e0e3ff;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #444;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            font-size: 0.95rem;
            font-weight: 600;
            color: #555;
            margin-bottom: 6px;
        }

        input[type="text"],
        input[type="number"] {
            width: 100%;
            padding: 10px 12px;
            border-radius: 8px;
            border: 2px solid #e0e0f5;
            font-size: 1rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.15);
        }

        .helper-text {
            font-size: 0.8rem;
            color: #888;
            margin-top: 4px;
        }

        .button-row {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .primary-btn {
            padding: 10px 24px;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            color: white;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.5);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .primary-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 18px rgba(102, 126, 234, 0.6);
        }

        .primary-btn:active {
            transform: translateY(0);
            box-shadow: 0 3px 8px rgba(102, 126, 234, 0.4);
        }

        .status {
            font-size: 0.9rem;
            color: #777;
        }

        .status.error {
            color: #e74c3c;
        }

        .status.success {
            color: #27ae60;
        }

        .cards-section {
            background: #fdfdff;
            border-radius: 16px;
            padding: 20px 20px 10px;
            border: 1px solid #e0e0f5;
        }

        .cards-list {
            margin-top: 10px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }

        .pokemon-card {
            background: linear-gradient(145deg, #ffffff, #f2f3ff);
            border-radius: 14px;
            padding: 14px 14px 12px;
            border: 1px solid #e0e0f5;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.06);
            position: relative;
        }

        .pokemon-name {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 4px;
            color: #333;
        }

        .pokemon-type {
            display: inline-block;
            font-size: 0.8rem;
            font-weight: 600;
            padding: 3px 10px;
            border-radius: 999px;
            background: rgba(102, 126, 234, 0.1);
            color: #4b53c1;
            margin-bottom: 6px;
        }

        .pokemon-hp {
            font-size: 0.95rem;
            color: #666;
        }

        .empty-state {
            font-size: 0.95rem;
            color: #888;
            margin-top: 10px;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
            color: #667eea;
            font-weight: 600;
            font-size: 0.95rem;
            padding: 8px 14px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);
            transition: background 0.2s ease, transform 0.2s ease;
        }

        .back-link:hover {
            background: white;
            transform: translateY(-1px);
        }

        .badge {
            font-size: 0.8rem;
            padding: 4px 10px;
            border-radius: 999px;
            background: rgba(102, 126, 234, 0.1);
            color: #4b53c1;
            font-weight: 600;
        }

        @media (max-width: 900px) {
            .layout {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 600px) {
            .container {
                padding: 28px 18px 36px;
            }

            h1 {
                font-size: 2rem;
            }

            .subtitle {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-bar">
            <a href="index.html" class="back-link">
                <span>←</span>
                <span>Back to Home</span>
            </a>
            <span class="badge">Pokémon Collection</span>
        </div>

        <h1>My Pokémon Cards</h1>
        <p class="subtitle">A simple Firestore-backed list of the Pokémon cards I own.</p>

        <div class="layout">
            <section class="card-form">
                <h2 class="section-title">Add a New Card</h2>

                <div class="form-group">
                    <label for="cardName">Name</label>
                    <input type="text" id="cardName" placeholder="e.g., Pikachu">
                </div>

                <div class="form-group">
                    <label for="cardHp">HP</label>
                    <input type="number" id="cardHp" placeholder="e.g., 60" min="1" step="1">
                    <p class="helper-text">Enter the card's HP as a positive integer.</p>
                </div>

                <div class="form-group">
                    <label for="cardType">Type</label>
                    <input type="text" id="cardType" placeholder="e.g., Electric, Fire, Water">
                </div>

                <div class="button-row">
                    <button id="addCardButton" class="primary-btn">Add Pokémon Card</button>
                    <span id="statusMessage" class="status"></span>
                </div>
            </section>

            <section class="cards-section">
                <h2 class="section-title">Cards I Own</h2>
                <div id="cardsList" class="cards-list"></div>
                <p id="emptyState" class="empty-state" style="display: none;">No cards yet. Add your first Pokémon card!</p>
            </section>
        </div>
    </div>

    <!-- Firebase + Firestore -->
    <script type="module">
        // TODO: Replace with your own Firebase config from the Firebase console
        // Go to: Project Settings -> Your Apps -> CDN config
        const firebaseConfig = {

        apiKey: "AIzaSyCjus8Q-H1eyEshz3QZotirg_8A36nGNO8",

        authDomain: "personalwebsite-darren.firebaseapp.com",

        projectId: "personalwebsite-darren",

        storageBucket: "personalwebsite-darren.firebasestorage.app",

        messagingSenderId: "1008165403097",

        appId: "1:1008165403097:web:bf7d0874f95fed918f01c8",

        measurementId: "G-6GCEDT21LQ"

        };


        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import {
            getFirestore,
            collection,
            addDoc,
            onSnapshot,
            query,
            orderBy
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // DOM elements
        const cardNameInput = document.getElementById('cardName');
        const cardHpInput = document.getElementById('cardHp');
        const cardTypeInput = document.getElementById('cardType');
        const addCardButton = document.getElementById('addCardButton');
        const statusMessage = document.getElementById('statusMessage');
        const cardsList = document.getElementById('cardsList');
        const emptyState = document.getElementById('emptyState');

        const cardsCollection = collection(db, "pokemonCards");

        function setStatus(message, type = "") {
            statusMessage.textContent = message;
            statusMessage.classList.remove("error", "success");
            if (type) {
                statusMessage.classList.add(type);
            }
            if (message) {
                setTimeout(() => {
                    statusMessage.textContent = "";
                    statusMessage.classList.remove("error", "success");
                }, 3000);
            }
        }

        function validateForm(name, hp, type) {
            if (!name.trim()) {
                setStatus("Please enter a Pokémon name.", "error");
                return false;
            }
            if (!type.trim()) {
                setStatus("Please enter a type (e.g., Electric).", "error");
                return false;
            }
            if (!hp || isNaN(hp) || hp <= 0 || !Number.isInteger(hp)) {
                setStatus("HP must be a positive integer.", "error");
                return false;
            }
            return true;
        }

        async function handleAddCard() {
            const name = cardNameInput.value;
            const hp = Number(cardHpInput.value);
            const type = cardTypeInput.value;

            if (!validateForm(name, hp, type)) {
                return;
            }

            try {
                setStatus("Saving card...", "");
                addCardButton.disabled = true;

                await addDoc(cardsCollection, {
                    name: name.trim(),
                    hp,
                    type: type.trim(),
                    createdAt: new Date()
                });

                cardNameInput.value = "";
                cardHpInput.value = "";
                cardTypeInput.value = "";

                setStatus("Card added!", "success");
            } catch (error) {
                console.error("Error adding card:", error);
                setStatus("Failed to add card. Check console for details.", "error");
            } finally {
                addCardButton.disabled = false;
            }
        }

        addCardButton.addEventListener("click", (e) => {
            e.preventDefault();
            handleAddCard();
        });

        function renderCards(snapshot) {
            cardsList.innerHTML = "";

            if (snapshot.empty) {
                emptyState.style.display = "block";
                return;
            }

            emptyState.style.display = "none";

            snapshot.forEach((doc) => {
                const data = doc.data();
                const card = document.createElement("div");
                card.className = "pokemon-card";

                const nameEl = document.createElement("div");
                nameEl.className = "pokemon-name";
                nameEl.textContent = data.name;

                const typeEl = document.createElement("div");
                typeEl.className = "pokemon-type";
                typeEl.textContent = data.type || "Unknown";

                const hpEl = document.createElement("div");
                hpEl.className = "pokemon-hp";
                hpEl.textContent = `HP: ${data.hp ?? "?"}`;

                card.appendChild(nameEl);
                card.appendChild(typeEl);
                card.appendChild(hpEl);

                cardsList.appendChild(card);
            });
        }

        // Real-time listener for cards collection
        const q = query(cardsCollection, orderBy("createdAt", "desc"));
        onSnapshot(q, renderCards, (error) => {
            console.error("Error listening for card updates:", error);
            setStatus("Error loading cards from Firestore.", "error");
        });
    </script>
</body>
</html>


